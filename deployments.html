---
layout: default
title: Deployments
---

<div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'><h1 id="deployments">Deployments</h1>

<p>The deployments information are available in read-only. They are populated when
application are deployed.</p>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><strong>Deployment attributes</strong></p>

<table class="table">
  <thead>
    <tr>
      <th>field</th>
      <th>type</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>unique ID</td>
    </tr>
    <tr>
      <td>app_id</td>
      <td>string</td>
      <td>unique ID referencing the app this deployment belongs to</td>
    </tr>
    <tr>
      <td>created_at</td>
      <td>date</td>
      <td>date of creation</td>
    </tr>
    <tr>
      <td>status</td>
      <td>string</td>
      <td>status of the deployment (building, success, aborted, *-error)</td>
    </tr>
    <tr>
      <td>git_ref</td>
      <td>string</td>
      <td>git SHA</td>
    </tr>
    <tr>
      <td>pusher</td>
      <td>object</td>
      <td>embedded user who pushed the GIT reference</td>
    </tr>
    <tr>
      <td>links</td>
      <td>object</td>
      <td>hypermedia links about the deployment</td>
    </tr>
  </tbody>
</table>

<p><strong>Deployment pusher attributes</strong></p>

<table class="table">
  <thead>
    <tr>
      <th>field</th>
      <th>type</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>string</td>
      <td>unique ID</td>
    </tr>
    <tr>
      <td>email</td>
      <td>string</td>
      <td>email of user who pushed</td>
    </tr>
    <tr>
      <td>username</td>
      <td>string</td>
      <td>username on Scalingo’s platform</td>
    </tr>
  </tbody>
</table>

<p><strong>Deployment links attributes</strong></p>

<table class="table">
  <thead>
    <tr>
      <th>field</th>
      <th>type</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>output</td>
      <td>string</td>
      <td>URL to the logs of the deployment</td>
    </tr>
  </tbody>
</table>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100930736f7563d5030000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-10T10:49:42.390+02:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef1234567890"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pusher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100245736f7563d5000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.scalingo.com/v1/deployments/123e4567-e89b-12d3-a456-426655440000/output"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="list-the-deployments-of-an-app">List the deployments of an app</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><code class="highlighter-rouge">GET https://api.scalingo.com/v1/apps/[:app]/deployments</code></p>

<p>This endpoint returns data of several deployments</p>

<blockquote>
  <p>Feature: pagination</p>
</blockquote>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example request</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span> -u <span class="s2">":</span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
  -X GET https://api.scalingo.com/v1/apps/example-app/deployments
</code></pre>
</div>

<p>Returns 200 OK</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"deployments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100930736f7563d5030000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-10T10:49:42.390+02:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef1234567890"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build-error"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pusher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100245736f7563d5000000"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"prev_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="get-a-particular-deployment">Get a particular deployment</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><code class="highlighter-rouge">GET https://api.scalingo.com/v1/apps/[:app]/deployments/[:deployment_id]</code></p>

<p>This endpoint returns data of a given deployment from its ID</p>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example request</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span> -u <span class="s2">":</span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
  -X GET https://api.scalingo.com/v1/apps/example-app/deployments/123e4567-e89b-12d3-a456-426655440000
</code></pre>
</div>

<p>Returns 200 OK</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100930736f7563d5030000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-10T10:49:42.390+02:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef1234567890"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pusher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54100245736f7563d5000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john"</span><span class="w">
        </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="trigger-manually-a-deployment-from-a-github-repository-or-any-custom-code-archive">Trigger manually a deployment from a GitHub repository or any custom code archive.</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><code class="highlighter-rouge">POST https://api.scalingo.com/v1/apps/[:app]/deployments</code></p>

<p>With this helper, you’ll be able to trigger a deployment from your application
without doing it by a <code class="highlighter-rouge">git push</code>.</p>

<h3 id="attributes">Attributes</h3>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHA git to deploy"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Archive with the source"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <a href="/sources">Sources</a> endpoints have been creating in order to let you upload the code temporarily
at some place and get a <code class="highlighter-rouge">source_url</code> for your code either it’s on GitHub or not.</p>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example request</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span> -u <span class="s2">":</span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
     -X POST https://api.scalingo.com/v1/apps/example-app/deployments -d <span class="se">\</span>
     <span class="s1">'{
       "deployment": {
         "git_ref": "master",
         "source_url": "https://github.com/Scalingo/sample-go-martini/archive/master.tar.gz"
       }
     }'</span>
</code></pre>
</div>

<p>Returns 200 OK</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"5e34a76a-24b7-4d50-be96-942ca986a786"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2016-12-16T16:33:58.250+01:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"app_id"</span><span class="p">:</span><span class="s2">"529ba36e65d972e883203922"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finished_at"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"building"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"previous_git_ref"</span><span class="p">:</span><span class="s2">"eb5454c314e2e9c8f98efa9b4422476b391df185"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pusher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"51161e5ef1e42617000001"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.scalingo.com/v1/apps/529ba36e65d972e883203922/deployments/5e34a76a-24b7-4d50-be96-942ca986a786/output"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="trigger-manually-a-deployment-from-an-archive">Trigger manually a deployment from an archive</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><code class="highlighter-rouge">POST https://api.scalingo.com/v1/apps/[:app]/deployments</code></p>

<p>With this helper, you’ll be able to trigger a deployment from your application
without doing it by a <code class="highlighter-rouge">git push</code>. You just need to provide a link to an archive containing the sources. The archive must follow some format:</p>

<ul>
  <li>tar archive compressed with gzip</li>
  <li>the tar archive MUST contain a single folder at the root. This folder contains the sources of your application.</li>
</ul>

<blockquote>
  <p>The <code class="highlighter-rouge">git_ref</code> is optional. You can use this attribute to provide any string identifying your archive.</p>
</blockquote>

<h3 id="attributes">Attributes</h3>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference in git to deploy"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Archive with the source"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example request</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span> -u <span class="s2">":</span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
     -X POST https://api.scalingo.com/v1/apps/example-app/deployments -d <span class="se">\</span>
     <span class="s1">'{
       "deployment": {
         "git_ref": "v0.0.2",
         "source_url": "https://github.com/Scalingo/sample-go-martini/archive/master.tar.gz"
       }
     }'</span>
</code></pre>
</div>

<p>Returns 200 OK</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"5e34a76a-24b7-4d50-be96-942ca986a786"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2016-12-16T16:33:58.250+01:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"app_id"</span><span class="p">:</span><span class="s2">"529ba36e65d972e883203922"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finished_at"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"building"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"git_ref"</span><span class="p">:</span><span class="s2">"v0.0.2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"previous_git_ref"</span><span class="p">:</span><span class="s2">"v0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"archive"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pusher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"51161e5ef1e42617000001"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.scalingo.com/v1/apps/529ba36e65d972e883203922/deployments/5e34a76a-24b7-4d50-be96-942ca986a786/output"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="get-the-output-of-the-deployment">Get the output of the deployment</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<p><code class="highlighter-rouge">GET https://api.scalingo.com/v1/apps/[:app]/deployments/[:deployment_id]/output</code></p>

<p>This endpoint will return all the log of the deployment. Those are basically what
you have seen in your terminal when running <code class="highlighter-rouge">git push</code>.</p>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Example request</p>

<div class="highlighter-rouge"><pre class="highlight"><code>curl -H <span class="s2">"Accept: text/plain"</span> -u <span class="s2">":</span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
  -X GET https://api.scalingo.com/v1/apps/example-app/deployments/123e4567-e89b-12d3-a456-426655440000/output
</code></pre>
</div>

<p>Returns 200 OK
Content-Type: text/plain</p>

<div class="highlighter-rouge"><pre class="highlight"><code>-----&gt; Buildpack version 1.2.0
-----&gt; Compiling Ruby/Rails
-----&gt; Using Ruby version: ruby-2.2.2
-----&gt; Installing dependencies using 1.6.3
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment
       Using json 1.8.2
       Using rake 10.4.2
       Using thread_safe 0.3.5
       Using builder 3.2.2
       [...]
       Using compass-rails 2.0.4
       Using ember-rails 0.18.2
       Your bundle is complete!
       Gems in the groups development and test were not installed.
       It was installed into ./vendor/bundle
       Bundle completed (2.64s)
       Cleaning up the bundler cache.
-----&gt; Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       I, [2015-05-12T21:45:45.836623 #191]  INFO -- : Writing /build/b7dd3507ecdd8019252dd870615d9d92/public/assets/application-60470b7668df29a6c53fbd61784165a6.js
       Asset precompilation completed (24.44s)
       Cleaning assets
       Running: rake assets:clean

----- Procfile declares types -&gt; web
</code></pre>
</div>

</div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<h2 id="get-real-time-output-of-a-live-deployment">Get real time output of a live deployment</h2>

</div><div class='hidden-xs col-xs-12 col-sm-6 sidebar-code'></div></div><div class='row'><div class='col-xs-12 col-sm-6 sidebar-text'>
<blockquote>
  <p>Real time output comes from a WebSocket</p>
</blockquote>

<p>You have to get the URL from the <code class="highlighter-rouge">.links.deployments_stream</code> value of an app
object, it usually looks like to <code class="highlighter-rouge">wss://deployments.scalingo.com/apps/[:app]</code>
but may change in the future. That’s why you have to first get an app and
read the URL from there.</p>

<p>First thing to do when connected is to authenticate sending an <code class="highlighter-rouge">auth</code> frame:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;api</span><span class="w"> </span><span class="err">token&gt;</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>On authentication error, the websocket will be ended immediately.</p>

<p>Otherwise you’ll start receiving existing logs and real time logs for the app
deployments. There can’t be several deployments in parallel for a given application.</p>

<h3 id="event-types">Event types</h3>

<p>You’ll receive different types of message from the websocket:</p>

<ul>
  <li><code class="highlighter-rouge">ping</code> which is sent to keep the connection open and avoid timeout.</li>
  <li><code class="highlighter-rouge">new</code> when a new deployment is triggered this event is sent to notify listeners</li>
  <li><code class="highlighter-rouge">log</code> each time a log line is displayed, it is sent through this kind of event</li>
  <li><code class="highlighter-rouge">status</code> the deployment goes through multiple states during its lifetime:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>  building → pushing → starting → success
           → pushing → starting → crashed-error
           → pushing → starting → timeout-error
           → pushing → aborted
           → aborted
           → build-error
</code></pre>
</div>

<h3 id="details-about-the-deployment-statuses">Details about the deployment statuses</h3>

<ul>
  <li><code class="highlighter-rouge">building</code>: when the buildpack is chosen and executed</li>
  <li><code class="highlighter-rouge">pushing</code>: the generated Docker image is pushed to our registry</li>
  <li><code class="highlighter-rouge">starting</code>: the order to start your app has been transmitted to our scheduler</li>
  <li><code class="highlighter-rouge">success</code>: the application has correctly started, end of deployment</li>
  <li><code class="highlighter-rouge">crashed-error</code>: the application failed to boot, have a look to the logs</li>
  <li><code class="highlighter-rouge">timeout-error</code>: the application has not started in 60 seconds</li>
  <li><code class="highlighter-rouge">build-error</code>: something went wrong during the buildpack execution, have a look at deployments logs</li>
  <li><code class="highlighter-rouge">aborted</code>: if the connection is broken between the pusher and our infrastructure, the deployment is considered as canceled.</li>
</ul>

</div><div class='col-xs-12 col-sm-6 sidebar-code'>
<p>Events example</p>

<p>New Event</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"deployment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Output Event</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle completed (2.64s)"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Status Event</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123e4567-e89b-12d3-a456-426655440000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Ping Event</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ping"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1465288802</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
</div></div>
